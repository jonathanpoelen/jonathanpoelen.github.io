<!DOCTYPE html>
<html lang="fr-FR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paramètres de fonction nommés en C&#43;&#43;</title>
<meta name="generator" content="Hugo 0.48" />



<link rel="stylesheet" type="text/css" media="all" href="https://fonts.googleapis.com/css?family=Droid+Serif" crossorigin="anonymous" />
<link rel="stylesheet" type="text/css" media="all" href="https://fonts.googleapis.com/css?family=Noto+Sans" crossorigin="anonymous" />
<link rel="stylesheet" type="text/css" media="all" href="/css/style.css" />

<link rel="stylesheet" type="text/css" media="all" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous" />

<link rel="alternate stylesheet" title="Night theme" href="/css/night.css" />
<link rel="shortcut icon" href="/favicon.ico" />
<meta property="og:site_name" content="Jonathan Poelen&#39;s Blog">
<meta property="og:title" content="Paramètres de fonction nommés en C&#43;&#43;">
<meta property="og:url" content="https://jonathanpoelen.github.io/2015/07/param%C3%A8tres-de-fonction-nomm%C3%A9s-en-c--/">
<meta property="og:language" content="fr-FR">
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
    <meta name="DC.publisher" lang="fr" content="Zeste de Savoir" />
    
    <meta name="DC.creator" content="Akulen" />
    
    <meta name="DC.creator" content="informaticienzero" />
    
    <meta name="DC.creator" content="mehdidou99" />
    
    <meta name="DC.type" content="text" />
    <meta name="DC.title" content="La programmation en C++ moderne" />
    <meta name="DC.abstract" content="La programmation en C++ moderne – Apprenez la programmation de zéro jusqu&#39;à l&#39;infini !" />
    <meta name="DC.subject" lang="fr" content="Programmation et algorithmique – c++ ; c++17" />
    <meta name="DC.description" lang="fr" content="Apprenez la programmation de zéro jusqu&#39;à l&#39;infini !" />
    <meta name="DC.date" content="2018/08/31" />
    <meta name="DC.format" content="text/html" />
    
    <meta name="DC.language" content="fr" />
    <meta name="DC.rights" content="Licence CC BY" />
<meta property="twitter:domain" content="https://jonathanpoelen.github.io/">
<meta property="twitter:card" content="summary">
<meta property="twitter:url" content="https://jonathanpoelen.github.io/2015/07/param%C3%A8tres-de-fonction-nomm%C3%A9s-en-c--/">
<meta property="twitter:title" content="Paramètres de fonction nommés en C&#43;&#43;">
<meta name="description" content="Cet article est la démonstration de l&rsquo;article précédent. La problématique présentée est la suivante: &laquo;&nbsp;Comment, dans une fonction avec plusieurs paramètres optionnels, initialiser un paramètre précis sans indiquer les valeurs optionnelles qui précèdent ?&nbsp;&raquo;
La fonction de référence sera la suivante:
void draw_rect( unsigned w, unsigned h , char border_top = &#39;-&#39;, char border_bottom = &#39;-&#39; , char border_left = &#39;&lt;&#39;, char border_right = &#39;&gt;&#39; , char fill = &#39;#&#39; ) { std::cout &lt;&lt; std::setfill(border_top) &lt;&lt; std::setw(w&#43;2) &lt;&lt; &#34;&#34; &lt;&lt; &#34;\n&#34;; while (h--) { std::cout &lt;&lt; border_left &lt;&lt; std::setfill(fill) &lt;&lt; std::setw(w) &lt;&lt; &#34;&#34; &lt;&lt; border_right &lt;&lt; &#34;\n&#34;; } std::cout &lt;&lt; std::setfill(border_bottom) &lt;&lt; std::setw(w&#43;2) &lt;&lt; &#34;&#34; &lt;&lt; &#34;\n&#34;; }  Comment faire un appel proche de draw_rect(4,3, fill=&#39;@&#39;)  ?">
<meta property="twitter:description" content="Cet article est la démonstration de l&rsquo;article précédent. La problématique présentée est la suivante: &laquo;&nbsp;Comment, dans une fonction avec plusieurs paramètres optionnels, initialiser un paramètre précis sans indiquer les valeurs optionnelles qui précèdent ?&nbsp;&raquo;
La fonction de référence sera la suivante:
void draw_rect( unsigned w, unsigned h , char border_top = &#39;-&#39;, char border_bottom = &#39;-&#39; , char border_left = &#39;&lt;&#39;, char border_right = &#39;&gt;&#39; , char fill = &#39;#&#39; ) { std::cout &lt;&lt; std::setfill(border_top) &lt;&lt; std::setw(w&#43;2) &lt;&lt; &#34;&#34; &lt;&lt; &#34;\n&#34;; while (h--) { std::cout &lt;&lt; border_left &lt;&lt; std::setfill(fill) &lt;&lt; std::setw(w) &lt;&lt; &#34;&#34; &lt;&lt; border_right &lt;&lt; &#34;\n&#34;; } std::cout &lt;&lt; std::setfill(border_bottom) &lt;&lt; std::setw(w&#43;2) &lt;&lt; &#34;&#34; &lt;&lt; &#34;\n&#34;; }  Comment faire un appel proche de draw_rect(4,3, fill=&#39;@&#39;)  ?">

</head>
<body class="body body-right-sidebar mobile" itemscope="itemscope" itemtype="http://schema.org/WebPage">
  <div id="avoidance-link">
    <a class="evitement" href="#main-content" title="Aller au contenu">Aller au contenu</a>
    <a class="evitement" href="#main-menu" title="Aller au menu">Aller au menu</a>
  </div>
  <div class="container container-outer">
    <header class="header" itemscope="itemscope" itemtype="http://schema.org/WPHeader">
      <div class="container-inner">
        <div class="logo" role="banner" itemscope="itemscope" itemtype="http://schema.org/Brand">
          <a class="logo__link" href="/" title="Jonathan Poelen&#39;s Blog" rel="home">
            <h1 class="logo__title">Le blog de Jonathan Poelen</h1>
            <h2 class="logo__tagline">Mon petit mémo sur tout ce qui touche à la programmation =)</h2>
          </a>
        </div>
        <nav class="menu" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">
  <ul class="menu__list">
    <li class="menu__item"><a class="menu__link" title="GitHub" rel="noopener noreferrer" href="https://github.com/jonathanpoelen">
      <i class="fab fa-github" aria-hidden="true"></i> Github
    </a></li>
    <li class="menu__item "><a class="menu__link" title="Archives" href="/archives">
      <i class="fas fa-archive" aria-hidden="true"></i> Archives</a>
    </li>
    <li class="menu__item"><a class="menu__link" title="Flux RSS" href="/index.xml">
      <i class="fas fa-rss" aria-hidden="true"></i> RSS</a>
    </li>
  </ul>
</nav>


      </div>
    </header>
    <div class="wrapper clearfix">

<aside class="sidebar" itemscope="itemscope" itemtype="http://schema.org/WPSideBar">
	
<div class="widget-search widget">
  <form class="widget-search__form" role="search" method="get" action="//google.com/search">
    <label>
      <span class="screen-reader-text">Search for:</span>
      <input class="widget-search__field" type="search" placeholder="SEARCH..." value="" name="q">
    </label>
    <input class="widget-search__submit" type="submit" value="Search">
    <input type="hidden" name="sitesearch" value="https://jonathanpoelen.github.io/" />
  </form>
</div>

	
<div class="widget-recent widget" id="main-menu">
  <h4 class="widget__title"><i class="fas fa-file-text-o" aria-hidden="true"></i> Articles récents</h4>
  <div class="widget__content">
    <ul class="widget__list">
      <li class="widget__item"><a class="widget__link" href="/2018/10/comparaison-de-diff%C3%A9rentes-impl%C3%A9mentations-de-mp_index_of/">comparaison de différentes implémentations de mp_index_of</a></li>
      <li class="widget__item"><a class="widget__link" href="/2018/09/au-c%C5%93ur-dun-variant/">Au cœur d&#39;un variant</a></li>
      <li class="widget__item"><a class="widget__link" href="/2018/02/faites-parler-votre-compilateur/">Faites parler votre compilateur</a></li>
      <li class="widget__item"><a class="widget__link" href="/2018/01/ma-vision-de-laccessibilit%C3%A9-appliqu%C3%A9e-pour-ce-blog/">Ma vision de l&#39;accessibilité appliquée pour ce blog</a></li>
      
      <li class="widget__item"><a class="widget__link widget__link__other" href="/archives">28 autres…</a></li>
    </ul>
  </div>
</div>
<div class="widget-recent widget">
  <h4 class="widget__title"><i class="fas fa-clock-o" aria-hidden="true"></i> Articles récemment mis à jour</h4>
  <div class="widget__content">
    <ul class="widget__list">
      <li class="widget__item"><a class="widget__link" href="/2015/09/if-constexpr-avant-c--17/">
        <time datetime="2018-03-04T23:14:38">04/03/2018</time>
        -- if constexpr avant C&#43;&#43;17
      </a></li>

    </ul>
  </div>
</div>

	
<div class="widget-categories widget">
  <h4 class="widget__title"><i class="fas fa-folder-o" aria-hidden="true"></i> Catégories</h4>
  <div class="widget__content">
    <ul class="widget__list">
      <li class="widget__item">
        <a class="rss-link" href="/categories/index.xml" type="application/rss+xml" title="Flux RSS pour C&#43;&#43;">
          &nbsp;
          <i class="fas fa-rss" aria-hidden="true"></i>
          <span class="sr-only link-alt">Flux RSS</span>&nbsp;
        </a>
        <a class="widget__link" href="/categories/c&#43;&#43;">C&#43;&#43; (20)</a>
      </li>
      <li class="widget__item">
        <a class="rss-link" href="/categories/index.xml" type="application/rss+xml" title="Flux RSS pour Script-Shell">
          &nbsp;
          <i class="fas fa-rss" aria-hidden="true"></i>
          <span class="sr-only link-alt">Flux RSS</span>&nbsp;
        </a>
        <a class="widget__link" href="/categories/script-shell">Script-Shell (6)</a>
      </li>
      <li class="widget__item">
        <a class="rss-link" href="/categories/index.xml" type="application/rss+xml" title="Flux RSS pour Accessibilité-Web">
          &nbsp;
          <i class="fas fa-rss" aria-hidden="true"></i>
          <span class="sr-only link-alt">Flux RSS</span>&nbsp;
        </a>
        <a class="widget__link" href="/categories/accessibilit%c3%a9-web">Accessibilité-Web (2)</a>
      </li>
      <li class="widget__item">
        <a class="rss-link" href="/categories/index.xml" type="application/rss+xml" title="Flux RSS pour Javascript">
          &nbsp;
          <i class="fas fa-rss" aria-hidden="true"></i>
          <span class="sr-only link-alt">Flux RSS</span>&nbsp;
        </a>
        <a class="widget__link" href="/categories/javascript">Javascript (2)</a>
      </li>
      <li class="widget__item">
        <a class="rss-link" href="/categories/index.xml" type="application/rss+xml" title="Flux RSS pour Make">
          &nbsp;
          <i class="fas fa-rss" aria-hidden="true"></i>
          <span class="sr-only link-alt">Flux RSS</span>&nbsp;
        </a>
        <a class="widget__link" href="/categories/make">Make (1)</a>
      </li>
      <li class="widget__item">
        <a class="rss-link" href="/categories/index.xml" type="application/rss+xml" title="Flux RSS pour Sqlite">
          &nbsp;
          <i class="fas fa-rss" aria-hidden="true"></i>
          <span class="sr-only link-alt">Flux RSS</span>&nbsp;
        </a>
        <a class="widget__link" href="/categories/sqlite">Sqlite (1)</a>
      </li>
      <li class="widget__item">
        <a class="rss-link" href="/categories/index.xml" type="application/rss+xml" title="Flux RSS pour Zsh">
          &nbsp;
          <i class="fas fa-rss" aria-hidden="true"></i>
          <span class="sr-only link-alt">Flux RSS</span>&nbsp;
        </a>
        <a class="widget__link" href="/categories/zsh">Zsh (1)</a>
      </li>
    </ul>
  </div>
</div>

	
	

</aside>
<main class="main-content content" role="main" itemprop="mainContentOfPage" id="main-content">
  
<article class="post">
  <header class="post__header clearfix">
    <div class="post__title-nextprev" id="param%C3%A8tres-de-fonction-nomm%C3%A9s-en-c&#43;&#43;"><span>
        <a href="https://jonathanpoelen.github.io/2015/09/if-constexpr-avant-c--17/"><i class="fas fa-caret-square-up" aria-hidden="true" title="Article précédent: if constexpr avant C&#43;&#43;17"></i></a>
        <a href="https://jonathanpoelen.github.io/2015/07/impl%C3%A9mentation-dun-magasin-de-type/"><i class="fas fa-caret-square-down" aria-hidden="true" title="Article suivant: Implémentation d&#39;un magasin de type"></i></a>
    </span></div>
    <h1 class="post__title"><a href="https://jonathanpoelen.github.io/2015/07/param%C3%A8tres-de-fonction-nomm%C3%A9s-en-c--/">Paramètres de fonction nommés en C&#43;&#43;</a></h1>
    <div class="post__title-nextprev-text sr-only">
        <a href="https://jonathanpoelen.github.io/2015/09/if-constexpr-avant-c--17/">Article suivant: if constexpr avant C&#43;&#43;17</a><br/>
        <a href="https://jonathanpoelen.github.io/2015/07/impl%C3%A9mentation-dun-magasin-de-type/">Article précédent: Implémentation d&#39;un magasin de type</a><br/>
    </div>
    
<p class="post__meta meta">
    <i class="fas fa-clock-o fa-fw" aria-hidden="true"></i>
    <time class="post__meta-date" datetime="2015-07-28T00:43:22">28 juillet 2015
</time>
    
    ;
  

  

<a class="meta-categories__link" href="/categories/c&#43;&#43;" rel="category"><i class="fas fa-folder fa-fw" aria-hidden="true"></i><span class="sr-only text-alt">Catégories&nbsp;:</span>c&#43;&#43;</a>
;


  <i class="fas fa-hourglass-start fa-fw" aria-hidden="true"></i><span class="sr-only text-alt fa-fw">Durée de lecture éstimée&nbsp;:</span>3 minutes ;
  <a href="https://jonathanpoelen.github.io/2015/07/param%C3%A8tres-de-fonction-nomm%C3%A9s-en-c--/#gh-comments" onclick="DoGithubComments( 0 )"><i class="fas fa-comments fa-fw" aria-hidden="true"></i>Commentaires</a> ;
  <a href="#8df7f8d0192d9f86d50bcccdaace39c9-share"><i class="fas fa-share-alt fa-fw" aria-hidden="true"></i>Partager</a>
</p>


  </header>
  <div class="post__content">
        <aside id="toc"><div id="tocInner">
          <h2 id="tocHeading">Sommaire</h2><nav id="TableOfContents">
<ul>
<li><a href="#création-d-un-paramètre-nommé">Création d&rsquo;un paramètre nommé</a></li>
<li><a href="#adapter-draw-rect">Adapter draw_rect</a></li>
<li><a href="#distribution-des-paramètres">Distribution des paramètres</a></li>
<li><a href="#aller-plus-loin">Aller plus loin</a></li>
</ul></nav>
        </div></aside>
      <p class="old_article"><strong class="old_article_title">Attention :</strong> Cet article date de plus de 2 ans. Les informations y figurant peuvent être dépassées.</p>
      

<p>Cet article est la démonstration de l&rsquo;article précédent. La problématique présentée est la suivante: &laquo;&nbsp;Comment, dans une fonction avec plusieurs paramètres optionnels, initialiser un paramètre précis sans indiquer les valeurs optionnelles qui précèdent ?&nbsp;&raquo;</p>

<p>La fonction de référence sera la suivante:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="nf">draw_rect</span><span class="p">(</span>
  <span class="kt">unsigned</span> <span class="n">w</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">h</span>
<span class="p">,</span> <span class="kt">char</span> <span class="n">border_top</span> <span class="o">=</span> <span class="sc">&#39;-&#39;</span><span class="p">,</span> <span class="kt">char</span> <span class="n">border_bottom</span> <span class="o">=</span> <span class="sc">&#39;-&#39;</span>
<span class="p">,</span> <span class="kt">char</span> <span class="n">border_left</span> <span class="o">=</span> <span class="sc">&#39;&lt;&#39;</span><span class="p">,</span> <span class="kt">char</span> <span class="n">border_right</span> <span class="o">=</span> <span class="sc">&#39;&gt;&#39;</span>
<span class="p">,</span> <span class="kt">char</span> <span class="n">fill</span> <span class="o">=</span> <span class="sc">&#39;#&#39;</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setfill</span><span class="p">(</span><span class="n">border_top</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="n">w</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;&#34;</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">h</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">border_left</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setfill</span><span class="p">(</span><span class="n">fill</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">border_right</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setfill</span><span class="p">(</span><span class="n">border_bottom</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="n">w</span><span class="o">+</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;&#34;</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Comment faire un appel proche de <span class="inlinecode highlight"><code class="language-cpp" data-lang="cpp"><span class="n">draw_rect</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="sc">&#39;@&#39;</span><span class="p">)</span>
</code></span> ?</p>

<a class="headline-hash" href="#création-d-un-paramètre-nommé"><h2 id="création-d-un-paramètre-nommé">Création d&rsquo;un paramètre nommé</h2></a>

<p>La première étape consiste à créer un type par paramètre optionnel. Comme je n&rsquo;ai pas envie de me compliquer la vie, la syntaxe <span class="inlinecode highlight"><code class="language-cpp" data-lang="cpp"><span class="n">fill</span><span class="o">=</span><span class="sc">&#39;@&#39;</span>
</code></span> qui demande plus de code à cause d&rsquo;une surcharge de <span class="inlinecode highlight"><code class="language-cpp" data-lang="cpp"><span class="k">operator</span><span class="o">=</span>
</code></span> sera remplacée par un simple appel de constructeur <span class="inlinecode highlight"><code class="language-cpp" data-lang="cpp"><span class="n">fill</span><span class="p">{</span><span class="sc">&#39;@&#39;</span><span class="p">}</span>
</code></span>.</p>

<p>La définition des types devient alors véritablement simpliste:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">struct</span> <span class="n">border_top</span> <span class="p">{</span> <span class="kt">char</span> <span class="n">value</span><span class="p">;</span> <span class="p">};</span>
<span class="k">struct</span> <span class="n">border_bottom</span> <span class="p">{</span> <span class="kt">char</span> <span class="n">value</span><span class="p">;</span> <span class="p">};</span>
<span class="k">struct</span> <span class="n">border_left</span> <span class="p">{</span> <span class="kt">char</span> <span class="n">value</span><span class="p">;</span> <span class="p">};</span>

<span class="k">struct</span> <span class="n">border_right</span> <span class="p">{</span> <span class="kt">char</span> <span class="n">value</span><span class="p">;</span> <span class="p">};</span>
<span class="k">struct</span> <span class="n">fill</span> <span class="p">{</span> <span class="kt">char</span> <span class="n">value</span><span class="p">;</span> <span class="p">};</span>
</code></pre></div>
<a class="headline-hash" href="#adapter-draw-rect"><h2 id="adapter-draw-rect">Adapter draw_rect</h2></a>

<p>Au lieu d&rsquo;adapter <code>draw_rect</code>, je vais passer par une surcharge, ceci n&rsquo;impactera pas le résultat.</p>

<p>La nouvelle fonction doit pouvoir prendre les nouveaux types, mais pas forcément tous et de préférence dans un ordre indéfini.</p>

<p>On pourrait faire toutes les surcharges possibles, il n&rsquo;y a &laquo;&nbsp;que&nbsp;&raquo; plus d&rsquo;une centaine de possibilités après tout&hellip; Solution rejetée, évidemment ;).</p>

<p>Une template variadique fera l&rsquo;affaire.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="err">... </span><span class="nc">Ts</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">draw_rect</span><span class="p">(</span><span class="kt">unsigned</span> <span class="n">w</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="n">h</span><span class="p">,</span> <span class="n">Ts</span><span class="p">...</span> <span class="n">params</span><span class="p">);</span>
</code></pre></div>
<p>Il reste maintenant à associer chaque type de <code>params</code> avec le paramètre de notre premier prototype de draw_rect.</p>

<a class="headline-hash" href="#distribution-des-paramètres"><h2 id="distribution-des-paramètres">Distribution des paramètres</h2></a>

<p>C&rsquo;est là qu&rsquo;intervient le magasin de type de l&rsquo;article précédant (toujours pas trouvé de meilleur nom).</p>

<p>Le principe est simple, toutes les valeurs de params sont regroupées sous une même enseigne appelé ici &laquo;&nbsp;pack&nbsp;&raquo;. On vérifie si le pack est convertible en un type voulu et dans le cas contraire, on utilise une valeur par défaut.</p>

<p>Notre pack ressemble à ça:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">struct</span> <span class="nl">Pack</span> <span class="p">:</span> <span class="n">Ts</span><span class="p">...</span> <span class="p">{</span>
  <span class="n">Pack</span><span class="p">(</span><span class="n">Ts</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span> <span class="o">:</span> <span class="n">Ts</span><span class="p">(</span><span class="n">args</span><span class="p">)...</span> <span class="p">{}</span>
<span class="p">}</span> <span class="n">pack</span><span class="p">{</span><span class="n">params</span><span class="p">...};</span>
</code></pre></div>
<p>Et la distribution des paramètres se fait ainsi:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">draw_rect</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span>
<span class="p">,</span> <span class="n">getval</span><span class="o">&lt;</span><span class="n">border_top</span><span class="o">&gt;</span><span class="p">(</span><span class="n">pack</span><span class="p">,</span> <span class="sc">&#39;-&#39;</span><span class="p">)</span>
<span class="p">,</span> <span class="n">getval</span><span class="o">&lt;</span><span class="n">border_bottom</span><span class="o">&gt;</span><span class="p">(</span><span class="n">pack</span><span class="p">,</span> <span class="sc">&#39;-&#39;</span><span class="p">)</span>
<span class="p">,</span> <span class="n">getval</span><span class="o">&lt;</span><span class="n">border_left</span><span class="o">&gt;</span><span class="p">(</span><span class="n">pack</span><span class="p">,</span> <span class="sc">&#39;&lt;&#39;</span><span class="p">)</span>
<span class="p">,</span> <span class="n">getval</span><span class="o">&lt;</span><span class="n">border_right</span><span class="o">&gt;</span><span class="p">(</span><span class="n">pack</span><span class="p">,</span> <span class="sc">&#39;&gt;&#39;</span><span class="p">)</span>
<span class="p">,</span> <span class="n">getval</span><span class="o">&lt;</span><span class="n">fill</span><span class="o">&gt;</span><span class="p">(</span><span class="n">pack</span><span class="p">,</span> <span class="sc">&#39;#&#39;</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div>
<p>Pour les plus attentifs (il m&rsquo;a fallu 2 jours pour le réaliser…), rien n&rsquo;empêche d&rsquo;envoyer des paramètres inutiles. On peut l&rsquo;empêcher grâce à un <span class="inlinecode highlight"><code class="language-cpp" data-lang="cpp"><span class="k">static_assert</span>
</code></span> avec une condition qui ressemble à</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">sizeof</span><span class="p">...(</span><span class="n">Ts</span><span class="p">)</span> <span class="o">==</span> <span class="n">std</span><span class="o">::</span><span class="n">is_convertible_t</span><span class="o">&lt;</span><span class="n">border_top</span><span class="o">&gt;</span><span class="p">()</span>
               <span class="o">+</span> <span class="n">std</span><span class="o">::</span><span class="n">is_convertible</span><span class="o">&lt;</span><span class="n">border_bottom</span><span class="o">&gt;</span><span class="p">()</span>
               <span class="o">+</span> <span class="cm">/*etc*/</span>
</code></pre></div>
<p>Dans l&rsquo;histoire, bien que largement surmontable, getval est la fonction la plus compliquée. Si Pack est convertible en <code>T</code> alors <code>Get::get()</code> est utilisé, sinon <code>Default::get()</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="err"> </span><span class="nc">T</span><span class="p">,</span> <span class="k">class</span><span class="err"> </span><span class="nc">Pack</span><span class="o">&gt;</span>
<span class="kt">char</span> <span class="n">getval</span><span class="p">(</span><span class="n">Pack</span><span class="o">&amp;</span> <span class="n">pack</span><span class="p">,</span> <span class="kt">char</span> <span class="n">default_</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">struct</span> <span class="n">Get</span>     <span class="p">{</span> <span class="k">static</span> <span class="kt">char</span> <span class="n">get</span><span class="p">(</span><span class="n">T</span> <span class="n">item</span><span class="p">,</span> <span class="kt">char</span>        <span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">item</span><span class="p">.</span><span class="n">value</span><span class="p">;</span> <span class="p">}</span> <span class="p">};</span>
  <span class="k">struct</span> <span class="n">Default</span> <span class="p">{</span> <span class="k">static</span> <span class="kt">char</span> <span class="n">get</span><span class="p">(</span><span class="n">Pack</span><span class="o">&amp;</span><span class="p">,</span> <span class="kt">char</span> <span class="n">default_</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">default_</span><span class="p">;</span>   <span class="p">}</span> <span class="p">};</span>
  <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">conditional</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">is_convertible</span><span class="o">&lt;</span><span class="n">Pack</span><span class="p">,</span> <span class="n">T</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">,</span> <span class="n">Get</span><span class="p">,</span> <span class="n">Default</span><span class="o">&gt;::</span><span class="n">type</span>
  <span class="o">::</span><span class="n">get</span><span class="p">(</span><span class="n">pack</span><span class="p">,</span> <span class="n">default_</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<a class="headline-hash" href="#aller-plus-loin"><h2 id="aller-plus-loin">Aller plus loin</h2></a>

<p>Les choses se compliquent quand on veut récupérer un type partiel. Un <span class="inlinecode highlight"><code class="language-cpp" data-lang="cpp"><span class="n">basic_fill</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
</code></span> par exemple. Actuellement, rien n&rsquo;existe dans le standard et il faudra jouer avec les paramètres template template et un <a href="https://jonathanpoelen.github.io/2014/11/appel-conditionnel-de-fonction-selon-la-validit%C3%A9-dune-expression/">appel conditionnel de fonction selon la validité d&rsquo;une expression</a>.</p>

<p>Pour compléter la solution, il faudrait aussi prendre en compte les références et ajouter des contraintes sur le paramètre.</p>

<p>Pour continuer dans la voie des paramètres nommés, il existe <code>Boost.Parameters</code> et des variantes plus modernes telles que <a href="https://github.com/odinthenerd/parameter2">parameter2</a>.</p>

  </div>
  <footer class="post__footer">
    <p class="post__meta meta">
  Le <time class="post__meta-date" datetime="2015-07-28T00:43:22">28 juillet 2015
</time> par Jonathan Poelen dans <a class="meta-categories__link" href="/categories/c&#43;&#43;" rel="category">c&#43;&#43;</a>
 ;
  

  <br/><a href="https://jonathanpoelen.github.io/2015/07/param%C3%A8tres-de-fonction-nomm%C3%A9s-en-c--/"><i class="fas fa-link fa-fw" aria-hidden="true"></i>Lien permanent.</a>
</p>
<p class="post__meta meta share" id="8df7f8d0192d9f86d50bcccdaace39c9-share">
  
  Partager Par
  <a title="Partager par email" href="mailto:?subject=param%25C3%25A8tres-de-fonction-nomm%25C3%25A9s-en-c%2b%2b&amp;Body=https%3a%2f%2fjonathanpoelen.github.io%2f2015%2f07%2fparam%25C3%25A8tres-de-fonction-nomm%25C3%25A9s-en-c--%2f"><i class="fas fa-envelope-square fa-fw" aria-hidden="true"></i><span class="sr-only">Mail</span></a>
  <a title="Partager sur Linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fjonathanpoelen.github.io%2f2015%2f07%2fparam%25C3%25A8tres-de-fonction-nomm%25C3%25A9s-en-c--%2f&amp;title=param%25C3%25A8tres-de-fonction-nomm%25C3%25A9s-en-c%2b%2b" rel="noopener noreferrer"><i class="fab fa-linkedin fa-fw" aria-hidden="true" style="color: #0077B5"></i><span class="sr-only">Linkedin</span></a>
  <a title="Partager sur Twitter" href="https://twitter.com/intent/tweet?url=https%3a%2f%2fjonathanpoelen.github.io%2f2015%2f07%2fparam%25C3%25A8tres-de-fonction-nomm%25C3%25A9s-en-c--%2f" rel="noopener noreferrer"><i class="fab fa-twitter-square fa-fw" aria-hidden="true" style="color: #1DA1F2"></i><span class="sr-only">Twitter</span></a>
  <a title="Partager sur Google+" href="https://plus.google.com/share?url=https%3a%2f%2fjonathanpoelen.github.io%2f2015%2f07%2fparam%25C3%25A8tres-de-fonction-nomm%25C3%25A9s-en-c--%2f" rel="noopener noreferrer"><i class="fab fa-google-plus-square fa-fw" aria-hidden="true" style="color: #DE5549"></i><span class="sr-only">Google+</span></a>
  <a title="Partager sur Facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fjonathanpoelen.github.io%2f2015%2f07%2fparam%25C3%25A8tres-de-fonction-nomm%25C3%25A9s-en-c--%2f" rel="noopener noreferrer"><i class="fab fa-facebook-square fa-fw" aria-hidden="true" style="color: #4869b2"></i><span class="sr-only">Facebook</span></a>
  <a title="Partager sur Tumblr" href="https://www.tumblr.com/share/link?url=https%3a%2f%2fjonathanpoelen.github.io%2f2015%2f07%2fparam%25C3%25A8tres-de-fonction-nomm%25C3%25A9s-en-c--%2f&amp;name=param%25C3%25A8tres-de-fonction-nomm%25C3%25A9s-en-c%2b%2b" rel="noopener noreferrer"><i class="fab fa-tumblr-square fa-fw" aria-hidden="true" style="color: #349099"></i><span class="sr-only">Tumblr</span></a>
</p>

  </footer>
</article>

  
  
<nav class="post-nav row" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">
  <div class="post-nav__item post-nav__item--prev">
    <a class="post-nav__link" href="/2015/07/impl%C3%A9mentation-dun-magasin-de-type/" rel="prev"><span class="post-nav__caption">«Précédent</span><span class="post-nav__post-title">Implémentation d&#39;un magasin de type</span></a>
  </div>
  <div class="post-nav__item post-nav__item--next">
    <a class="post-nav__link" href="/2015/09/if-constexpr-avant-c--17/" rel="next"><span class="post-nav__caption">Suivant»</span><span class="post-nav__post-title">if constexpr avant C&#43;&#43;17</span></a>
  </div>
</nav>

  <section id="gh-comments">
  <h1>Commentaires</h1>
<p>Les commentaires ne sont pas encore ouverts.</p>
<p>Le système de commentaire passe par <a href="https://github.com/jonathanpoelen/jonathanpoelen.github.io/issues">les issues de github</a> et aucun n'est associée au billet.
Vous pouvez faire votre commentaire dans une issue qui a comme titre celui du billet. Je
me chargerai de les associer.</p>
</section>

</main>
</div>
  <footer class="footer" itemscope="itemscope" itemtype="http://schema.org/WPFooter">
    <p class="footer-archive"><a href="/archives" title="Archives">Archives</a></p>
    <p class="footer__copyright">
       Jonathan Poelen&#39;s Blog. <span class="footer__copyright-credits">
      Généré avec <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a>
      et <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad theme</a>.
      Utilise <a href="http://fontawesome.io" rel="nofollow noopener" target="_blank">Font Awesome</a> de Dave Gandy pour les icônes.
      </span>
    </p>
  </footer>
</div>
<a id="backtop" href="#avoidance-link"><i class="fas fa-arrow-circle-up fa-3x" aria-hidden="true"></i><span class="sr-only">Revenir en haut</span></a>

</body>
</html>

